---
title: ì‹¤ì‹œê°„ ë™ì‹œ íŽ¸ì§‘ OT vs CRDT
date: 2023-10-15
categories:
  - Study
tags:
  - ìžë£Œêµ¬ì¡°
---

# ì‹¤ì‹œê°„ ë™ì‹œ íŽ¸ì§‘

ë§Œì•½ Google Docsì—ì„œ [ðŸ”´Red] ì™€ [ðŸ”µBlue] ê°€ ë¬¸ì„œë¥¼ ìž‘ì„±í•˜ë ¤ê³  í•©ë‹ˆë‹¤.

ë‘ ëª… ë‹¤ ë˜‘ê°™ì´ `Hello!` ë¥¼ ë³´ê³  ìžˆìŠµë‹ˆë‹¤.

```
Hello!
```

[ðŸ”´Red] ëŠ” `Hello` ì™€ `!` ì‚¬ì´ì— `World` ë¥¼ ì¶”ê°€í•˜ê³ , [ðŸ”µBlue] ëŠ” `!` ë’¤ì— `:-)` ì´ëª¨í‹°ì½˜ì„ ì¶”ê°€í–ˆë‹¤ê³  ì¹˜ë©´,

ì–´ë–¤ ê²°ê³¼ê°€ ì–´ë–»ê²Œ ë‚˜ì˜¬ê¹Œìš”?

![](https://velog.velcdn.com/images/gusdh2/post/4e850b75-67a4-41f4-a8d4-6a717fc490ef/image.gif)

ì•„ë§ˆ ë‹¤ë“¤ ë‹¹ì—°ížˆ `Hello World ! :-)` ê°€ ë‚˜ì™€ì•¼ê² ë‹¤ê³  ìƒê°í•˜ì‹¤ ê²ë‹ˆë‹¤.

í•˜ì§€ë§Œ ë™ì‹œ íŽ¸ì§‘ì€ ì¸ê°„ì˜ ëˆˆì—” ì§ê´€ì ì´ì§€ë§Œ, êµ¬í˜„ìƒì—ì„œëŠ” ë¶„ì‚°ëœ í™˜ê²½ì—ì„œì˜ ë™ì‹œì„±ì€ ë³µìž¡í•œ ë¬¸ì œë¥¼ ê°€ì§€ê³  ìžˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ëª¨í˜¸í•¨ì„ í•´ê²°í•˜ê¸° ìœ„í•œ ì—¬ëŸ¬ ê¸°ìˆ  ì¤‘ ëŒ€í‘œì ì¸ 2ê°€ì§€ ê¸°ìˆ ì´ ìžˆìŠµë‹ˆë‹¤.

[OT ì•Œê³ ë¦¬ì¦˜] ê³¼ [CRDT ì•Œê³ ë¦¬ì¦˜] ìž…ë‹ˆë‹¤.

## OT vs CRDT

ìš°ì„  OT(Operational Transformation) ì•Œê³ ë¦¬ì¦˜ì€ ê³¼ê±°ì—ì„œë¶€í„° 2006ë…„ ì •ë„ê¹Œì§€ ì‚¬ìš©ë˜ì—ˆë˜ ê¸°ìˆ ì´ë©°, ëŒ€í‘œì ì¸ ì„œë¹„ìŠ¤ê°€ Google Docsì™€ MS Office Online ìž…ë‹ˆë‹¤.

ê·¸ë¦¬ê³  CRDT(Conflict-Free-Replicatied Data Types) ì•Œê³ ë¦¬ì¦˜ì€ 2006ë…„ ì´í›„ í˜„ìž¬ê¹Œì§€ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ë¡œ, ëŒ€í‘œì ìœ¼ë¡œ Figmaë‚˜ Redis ë“± ë§Žì€ ì„œë¹„ìŠ¤ë“¤ì´ ì‚¬ìš©í•˜ê³  ìžˆìŠµë‹ˆë‹¤.

# OT (Operational Transformation)

## OT ì˜ ìž‘ë™ ì›ë¦¬

ë‹¤ì‹œ Google Docsì—ì„œ **ðŸŸ¢Green** ê³¼ **ðŸŸ£Purple** ê°€ ë¬¸ì„œë¥¼ ìž‘ì„±í•˜ë ¤ê³  í•©ë‹ˆë‹¤.

ë‘ ì‚¬ìš©ìž ëª¨ë‘ ë‹¤ ë˜‘ê°™ì´ `Helo` ë¥¼ ë³´ê³  ìžˆìŠµë‹ˆë‹¤.

_**ðŸŸ¢Green** ì™€ **ðŸŸ£Purple** ê°€ ë™ì‹œì— íŽ¸ì§‘í•œë‹¤_ ê³  ê°€ì •í–ˆì„ ë•Œ,

```js
0123;
Helo;
```

**ðŸŸ¢Green** ì€ _INDEX 2ë²ˆ(`l`)ê³¼ INDEX 3ë²ˆ(`o`) ì‚¬ì´ì— `l`ì„ ì¶”ê°€_ í•˜ê³ , **ðŸŸ£Purple** ì€ *INDEX 3ë²ˆ(`o`) ë’¤ì— `!`ë¥¼ ì¶”ê°€í•œë‹¤*ê³  í–ˆì„ ë•Œ,

![](https://velog.velcdn.com/images/gusdh2/post/fac8c4e7-aa8f-422b-941a-f128d50f706d/image.png)

ì´ ë•Œ, ì•„ëž˜ ê·¸ë¦¼ê³¼ ê°™ì´

**ðŸŸ¢Green** ì—ì„œëŠ” _INDEX ìœ„ì¹˜ë¥¼ ì´ìš©í•´ì„œ `l`ì„ INDEX 3ë²ˆì— ì‚½ìž…í•˜ëŠ” ëª…ë ¹ì–´_, **ðŸŸ£Purple** ì—ì„œëŠ” _`!`ë¥¼ INDEX 4ë²ˆì— ë„£ëŠ” ëª…ë ¹ì–´_ ê°€ ë™ì‹œì— ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.

ì´ ë‘ ëª…ë ¹ì–´ë¥¼ ì¤‘ì•™ ì„œë²„(Server)ê°€ ë°›ì•„ì„œ ë¬¸ì„œë¥¼ í†µí•©í•©ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/gusdh2/post/5aacbbca-9427-4163-994b-2cdc872e781e/image.png)

ë§Œì•½, **ðŸŸ¢Green** ì˜ ëª…ë ¹ì–´(`l` ì„ INDEX 3ì— ì‚½ìž…í•˜ê¸°)ê°€ ë¨¼ì € ì‹¤í–‰ ë  ê²½ìš°,

**ðŸŸ£Purple** ì˜ ëª…ë ¹ì–´ë¡œ ì¸í•´ `!`ê°€ INDEX 4ì— ë“¤ì–´ê°€ì•¼í•˜ëŠ”ë°, ì´ë¯¸ `l`ì´ INDEX 3ì— ë“¤ì–´ê°€ì„œ INDEX ìœ„ì¹˜ê°€ ë°”ë€Œì–´ ë²„ë ¸ìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/gusdh2/post/23a25b75-e661-4f97-8f49-90caf8bb4699/image.png)

ë”°ë¼ì„œ, INDEX ìœ„ì¹˜ê°€ ë°”ë€Œì–´ **ðŸŸ£Purple**ì˜ ëª…ë ¹ì–´ì¸ `!`ë¥¼ INDEX 4ê°€ ì•„ë‹Œ INDEX 5ì˜ ìœ„ì¹˜ë¡œ ë³€ê²½ë˜ê²Œ ë©ë‹ˆë‹¤.

ì´ë ‡ê²Œ ëª…ë ¹ì–´ê°€ **ì´ì „ì— ë™ìž‘ë˜ì—ˆë˜ ëª…ë ¹ì–´ì— ì˜í•´ ë°”ë€Œì–´ ë‹¤ìŒ ë™ìž‘ì„ transform(ë³€í™˜) ì‹œì¼œ**ì¤˜ì•¼ í•˜ëŠ”ë°,

ì´ê²ƒì„ ë°”ë¡œ **`operational transformation` OT ì•Œê³ ë¦¬ì¦˜**ìž…ë‹ˆë‹¤.

## OT ë°©ì‹ì˜ ë¬¸ì œì 

![](https://velog.velcdn.com/images/gusdh2/post/fe2a8722-49b6-44fe-a2de-2685c3cbd93d/image.png)

ì´ëŸ¬í•œ OT ë°©ì‹ì— ë‹¨ì ì´ ìžˆìŠµë‹ˆë‹¤.

ì‚¬ìš©ìžê°€ ì„œë²„(Server)ì— ìˆ˜ì •ì‚¬í•­ì„ ë˜ì§€ê²Œ ë˜ë©´ ë‹¤ë¥¸ ìœ ì €ë“¤ê³¼ ì§ì ‘ì ìœ¼ë¡œ ì—°ë™í•  ë°©ë²• ì—†ìŠµë‹ˆë‹¤. **transformation(ë³€í™˜)ì„ í•˜ëŠ” ì£¼ì²´ì¸ ì„œë²„**ê°€ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ, OTì˜ ë¬¸ì œëŠ” **ì¤‘ì•™ ì§‘ì¤‘ì‹ ì„œë²„/DBê°€ í•„ìš”**í•©ë‹ˆë‹¤. ì´ëŸ° êµ¬ì¡°ì—ì„œëŠ” ì‚¬ëžŒì´ ëª°ë¦´ ë•Œ ê³¼ë¶€í™”ê°€ ì˜¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

# CRDT (Conflict-Free-Replicatied Data Types)

## CRDT ì˜ ìž‘ë™ ì›ë¦¬

**CRDT(Conflict-Free-Replicated Data Types)** ëŠ” **ì–´ë–¤ ë³€ê²½ì‚¬í•­ì„ ë°›ìœ¼ë©´, ìˆœì„œì™€ ìƒê´€ì—†ì´ ë³€ê²½ì‚¬í•­ë§Œ ê°™ìœ¼ë©´ ê°™ì€ ìƒíƒœ** ìž…ë‹ˆë‹¤.

ì¦‰, **OTëŠ” ìˆœì„œê°€ ì¤‘ìš”**í•˜ê³ , **CRDTëŠ” ìˆœì„œê°€ ìƒê´€ ì—†ê³  operationë§Œ ê°™ìœ¼ë©´ ì–´ê¸‹ë‚˜ë”ë¼ë„ ê°™ì€ ìƒíƒœ**ê°€ ë©ë‹ˆë‹¤.

OT ì•Œê³ ë¦¬ì¦˜ì€ INDEXê°€ ë³€í•˜ê²Œ ë˜ì–´ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ë§Œ, CRDTëŠ” ì´ ê°™ì€ ë¬¸ì œë¥¼ í”¼í•˜ê¸° ìœ„í•´ **ê° ê°œì²´ë¥¼ ìœ ë‹ˆí¬í•œ ê°’**ìœ¼ë¡œ ë´…ë‹ˆë‹¤. ê·¸ëž˜ì„œ í…ìŠ¤íŠ¸ê°€ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ìœ ë‹ˆí¬í•œ ê°’ì„ ìƒì„±í•´ì„œ ë„£ì–´ì£¼ê²Œ ë©ë‹ˆë‹¤.

ìœ„ì™€ ë™ì¼í•œ ì¡°ê±´ìœ¼ë¡œ CRDT ì˜ ì˜ˆë¥¼ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

ë‘ ì‚¬ìš©ìž ëª¨ë‘ ë‹¤ ë˜‘ê°™ì´ `Helo` ë¥¼ ë³´ê³  ìžˆìŠµë‹ˆë‹¤.

_**ðŸŸ¢Green** ì™€ **ðŸŸ£Purple** ê°€ **ë™ì‹œì— íŽ¸ì§‘í•œë‹¤**ê³  ê°€ì •í–ˆì„ ë•Œ,_

```js
Helo;
```

**ðŸŸ¢Green** ì€ _`l`ê³¼ `o` ì‚¬ì´ì— `l`ì„ ì¶”ê°€_ í•˜ê³ , **ðŸŸ£Purple** ì€ _`o` ë’¤ì— `!`ë¥¼ ì¶”ê°€_ í•œë‹¤ê³  í–ˆì„ ë•Œ,

_ì•„ëž˜ ê·¸ë¦¼ê³¼ ê°™ì´ ìœ ë‹ˆí¬í•œ ê°’ì„ 0ê³¼ 1 ì‚¬ì´ì˜ ìˆ«ìžë“¤ë¡œ ê°€ì •í•œë‹¤ë©´,_

![](https://velog.velcdn.com/images/gusdh2/post/fcb43ed4-085b-4c7b-8b14-4578153f8c10/image.png)

_**ðŸŸ¢Green** ê³¼ **ðŸŸ£Purple**ì˜ ëª…ë ¹ì–´ë¡œ ë™ì‹œì— `l` ê³¼ `!`ë¥¼ ë„£ëŠ”ë‹¤ëŠ” ê°€ì •í–ˆì„ ë•Œ,_

- **ðŸŸ¢Green**ì˜ ëª…ë ¹ì–´: `l`ì€ 0.6ê³¼ 0.8ì‚¬ì´ì— 0.7ì„ ìƒì„±í•©ë‹ˆë‹¤.
- **ðŸŸ£Purple**ì˜ ëª…ë ¹ì–´: `!`ëŠ” 0.8ê³¼ 1 ì‚¬ì´ì— 0.9ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

ì´ë ‡ë“¯ ë™ì‹œ íŽ¸ì§‘ì„ í•˜ë”ë¼ë„ í•©ì¹˜ëŠ” ê³¼ì •ì—ì„œ _**ìœ ë‹ˆí¬í•œ ê°’ìœ¼ë¡œ íŒë³„**_ ê¸° ë•Œë¬¸ì— **ì¶©ëŒì´ ì¼ì–´ë‚˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.** CRDTëŠ” ì´ëŸ¬í•œ ê¸°ìˆ ì„ ì„œë²„ì‘ë‹µì„ ê¸°ë‹¤ë¦´ í•„ìš” ì—†ì´ íŽ¸ì§‘ì´ ê°€ëŠ¥í•œ ê²ƒìž…ë‹ˆë‹¤.

í†µì‹ ì€ ì„œë²„ì—ì„œ í•˜ê±°ë‚˜ í´ë¼ì—ì„œ ì§ì ‘ ë³‘í•©í•˜ê±°ë‚˜ ê°™ì€ ê²°ê³¼ë¥¼ ë§Œë“¤ê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ì˜ ì˜í–¥ì„ ì§ì ‘ì ìœ¼ë¡œ ë°›ì§€ ì•Šì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ê·¸ëž˜ì„œ **CRDTëŠ” ì¤‘ì•™ì§‘ì¤‘ì‹ ì„œë²„ê°€ í•„ìš” í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** ì–´ë–¤ ë„¤íŠ¸ì›Œí¬, í†µì‹ ì„ ì„ íƒí•˜ë“ ì§€ ì œí•œì´ ì—†ìŠµë‹ˆë‹¤. ê·¸ëž˜ì„œ í˜‘ì—… ì• í”Œë¦¬ì¼€ì´ì…˜ ë¿ ì•„ë‹ˆë¼, Redis Enterprise ê°™ì€ ë°ì´í„° ì„¼í„° ê°„ì— ì§€ì—­ì ìœ¼ë¡œ ë–¨ì–´ì ¸ì„œ ìš´ì˜í•˜ëŠ” DB ì‹œìŠ¤í…œì—ë„ í™œìš©ë©ë‹ˆë‹¤.

## CRDT ë°©ì‹ì˜ ë¬¸ì œì 

í•˜ì§€ë§Œ CRDTì—ì„œë„ ì™„ë²½í•˜ì§€ ì•Šì€ ë™ìž‘ì´ ìžˆìŠµë‹ˆë‹¤. ë°”ë¡œ ì•„ëž˜ì™€ ê°™ì€ ì˜ˆì‹œìž…ë‹ˆë‹¤.

**ðŸ§‘â€ðŸ’»User 1**ê³¼ **ðŸ‘¨ðŸ½â€ðŸ’»User 2**ê°€ `Hello!`ë¥¼ ë³´ê³  ìžˆê³ , ë™ì‹œì— íŽ¸ì§‘í•©ë‹ˆë‹¤.

**ðŸ§‘â€ðŸ’»User 1**ì´ `Hello`ì™€ `!` ì‚¬ì´ì— `Alice`ë¥¼ ì‚½ìž…í•©ë‹ˆë‹¤. **ðŸ‘¨ðŸ½â€ðŸ’»User 2**ë„ `Hello`ì™€ `!` ì‚¬ì´ì— `Charlie`ë¥¼ ì‚½ìž…í•©ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/gusdh2/post/9f6a259f-3fba-427f-bd96-a3182c438116/image.png)

ê·¸ëž˜ì„œ ë‘ ëª…ë ¹ì–´ë¥¼ ì•„ëž˜ì™€ ê°™ì´ CRDT ë°©ì‹ìœ¼ë¡œ ë³‘í•©í•˜ê²Œ ë˜ë©´,

![](https://velog.velcdn.com/images/gusdh2/post/09fc939d-c296-408c-904c-fc95a949d202/image.png)

```
Hello Al Ciharcliee!
```

ìœ„ì™€ ê°™ì€ ê²°ê³¼ì²˜ëŸ¼ ì´ìƒí•œ ê²°ê³¼ë¥¼ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤.

ì•žì—ì„œ ë§í–ˆë“¯ì´ ê¸€ìž í•˜ë‚˜ì— ëª¨ë‘ ìœ ë‹ˆí¬í•œ (ìˆ«ìž)ê°’ì„ ê°€ì§„ë‹¤ê³  í–ˆì„ ë•Œ, ë…ë¦½ì ìœ¼ë¡œ ê¸€ìžë“¤ì´ ëžœë¤í™”ëœ ê°’ì— ì˜í•´ ë³‘í•©ë˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ëž˜ì„œ ë¶ˆí–‰í•˜ê²Œë„ `alice`ì™€ `charlie`ì˜ ê¸€ìžë“¤ì„ CRTD ì•Œê³ ë¦¬ì¦˜ ë°©ì‹ëŒ€ë¡œ ì •ë ¬í–ˆì„ ë•Œ ì´ìƒí•œ ê²°ê³¼ê°’ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ ë˜ëŠ” ê²ƒìž…ë‹ˆë‹¤.

## CRDTì˜ ë¬¸ì œë¥¼ ë³´ì™„í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ ê¸°ë²•ë“¤

![](https://velog.velcdn.com/images/gusdh2/post/ad391ab7-67c1-4e4b-bd35-da24db1ca1f9/image.png)

ì´ëŸ¬í•œ ë¬¸ì œì ì„ í•´ê²°í•˜ëŠ” ë‹¤ì–‘í•œ ì•Œê³ ë¦¬ì¦˜ ê¸°ë²•ë“¤ì´ ìžˆìŠµë‹ˆë‹¤.

> ðŸ“š ì¶œì²˜: https://www.youtube.com/watch?v=x7drE24geUw
