---
title: '[javascript] 비트마스크 (Bitmask)'
date: 2023-10-11
categories:
  - Coding Tests
tags:
  - JavaScript
---

# 비트 연산

### NOT, AND, OR, XOR

| **A** | **B** | ~A  | A&B | A\|B | A^B |
| :---: | :---: | :-: | :-: | :--: | :-: |
| **0** | **0** |  1  |  0  |  0   |  0  |
| **0** | **1** |  1  |  0  |  1   |  1  |
| **1** | **0** |  0  |  0  |  1   |  1  |
| **1** | **1** |  0  |  1  |  1   |  0  |

- `not`연산의 경우 자료형에 따라 결과가 달라지는 것을 주의해야 한다.
- 특히, 2의 보수 때문에 `unsigned`와 `signed`에 따라서 정수로 보여지는 값이 달라진다.

### **Shift Left, Shift Right**

- `A << B`

  - A를 B비트만큼 왼쪽으로 밀기
  - $A * (2^B)$
  - ex. $3 << 4 = 3 * 2^4 = 3 * 16 = 48$

- `A >> B`

  - A를 B비트만큼 오른쪽으로 밀기
  - $A / (2^B)$
  - ex. $2 >> 4 = 2 / 2^4 = 2 / 16 = 1 / 8$

# 비트 마스크

비트 마스크는 비트 연산을 이용해 부분 집합을 표현하는 것이다.

- 비트 마스크를 통해 **집합을 정수로** 나타낼 수 있다.
- 단, 이 때 집합에 저장할 수 있는 수의 범위가 정해져 있어야 한다.
- 따라서 보통 **0부터 N-1까지 N개의 정수로 이루어진 집합**을 나타낼 때 사용한다

**ex)** $N = 10$일 때, $s = {1, 3, 4, 5, 9}$ 라는 집합에서 각 수의 존재 여부를 나타내면 다음과 같다.

| **9** | **8** | **7** | **6** | **5** | **4** | **3** | **2** | **1** | **0** |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
|   1   |   0   |   0   |   0   |   1   |   1   |   1   |   0   |   1   |   0   |

이를 정수로 나타내면, $1000111010(2) = 570$ 와 같다.

### **비트 마스크의 장점**

1. 공간을 적게 사용할 수 있다.
   - 위 예시에서 집합 $S$ 를 표현하는 데에는 `1`, `3`, `4`, `5`, `9`라는 5개의 정수가 필요하지만, 비트 마스크를 통해 표현하면 `570` 단 하나의 정수만 사용한다.
2. 연산의 시간복잡도가 $O(1)$으로 빠르다. 아래서 살펴보자.

### **비트 마스크의 단점**

- 정수는 32bits 혹은 64bits로 범위에 제한이 있어, 수의 범위가 너무 크면 사용할 수 없다.

### **비트 마스크의 연산하는 방법**

집합 $S$에 대해 수 $X$를 검사, 추가, 삭제, 토글 하는 방법

cf) 연산을 수행할 때 연산자 우선 순위 때문에 걱정되면 괄호를 사용하자!

**1. S에 X가 있는지 검사**

- **`S & (1 << X)`**
  - S의 X번째 비트가 1인지 0인지 검사
  - X번째 비트만 1로 두고 AND 연산 수행

**2. S에 X를 추가**

- **`S | (1 << X)`**
  - S의 X번째 비트를 1로 변경
  - X번째 비트만 1로 두고 OR 연산 수행

**3. S에서 X를 삭제**

- **`S & ~(1 << X)`**
  - S의 X번째 비트를 0으로 변경
  - X번째 비트만 0으로 두고 AND 연산 수행

**4. S에서 X를 토글**

- **`S ^ (1 << X)`**
  - S의 X번째 비트가 0이면 1로, 1이면 0으로 변경
  - X번째 비트만 1로 두고 XOR 연산 수행

# **결론**

- 그냥 배열을 사용하는 것이 편리하지만,
- 비트 마스크를 사용하는 이유는 **집합을 배열의 인덱스로 표현할 수 있기 때문**이다.
- **상태 다이나믹을 할 때 자주 사용**하게 된다.
- **적은 갯수를 저장하는 집합에서 사용하는 것이 적합**하다.
